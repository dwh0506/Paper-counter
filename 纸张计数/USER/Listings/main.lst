C51 COMPILER V9.55   MAIN                                                                  10/28/2019 16:13:08 PAGE 1   


C51 COMPILER V9.55, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\SYSTEM;..\HARDWARE;..\USER) DE
                    -BUG OBJECTEXTEND PRINT(.\Listings\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          //EEPROMÉèÎª1K£¬Ç°510×Ö½Ú£¨0-0x1FD£©´æ·ÅÐ£×¼ºóµÄÊý¾Ý,0x1FF·ÅÒ»±êÖ¾Î»
   2          
   3          #include  "config.h"
   4          #include  "Serial.h"//´®¿Ú1(P3.0/RxD, P3.1/TxD)
   5          #include <myself.h>
   6          #include  "AD.h"
   7          #include  "FDC2214.h"
   8          #include "stdio.h"
   9          #include "oled.h"
  10          #include  "STC8EEPROM.h"
  11          #define ShortCircuitValue 0x04000000//Á½¼«°å¶ÌÂ·µÄÅÐ¶ÏãÐÖµ
  12          #define FDC2214ChannelNum 0//²ÉÑùµÄÍ¨µÀºÅ£¬Ö»ÓÃµ½FDC2214µÄÒ»Â·Í¨µÀ
  13          #define BeepOnOff 1//·äÃùÆ÷¿ª¹Ø£¬1ÎªÕý³£¹¤×÷£¬0Îª¹Ø
  14          
  15          //longValueInROMÖÐ´æ·Å³ö³§Ð£×¼µã£¬
  16          //µÚÒ»´Î³õÊ¼»¯Ê±£¬´ÓlongValueInROM¸´ÖÆµ½EEPROMÖÐ,²¢ãÐÖµ£¬´æÈëFDC2214ThresholdValue
  17          //·ÇµÚÒ»´Î³õÊ¼»¯Ê±£¬EEPROMÖÐµÄÐ£×¼µã£¬Ëã³öãÐÖµ£¬´æÈëFDC2214ThresholdValue
  18          sbit Beep=P1^2;
  19          
  20          
  21          
  22          void main()
  23          {
  24   1        extern bit bS1Rec;//´®¿Ú½ÓÊÕµ½Êý¾Ý±êÖ¾
  25   1        extern bit bFlag3s;//3s¼ÆÊ±±êÖ¾
  26   1        extern bit bFlag2ms;//2ms±êÖ¾ 
  27   1        extern bit bFlagAD;//AD×ª»»±êÖ¾
  28   1        extern unsigned int xdata T0Counter3s;//3s¼ÆÊýÆ÷  
  29   1        extern unsigned char cS1Rec;//´®¿Ú½ÓÊÕµ½×Ö·û
  30   1        extern unsigned char cADCResult;//AD¸ß8Î» 
  31   1        extern unsigned long xdata FDC2214ThresholdValue[];//¸÷ÊýÁ¿Ö½ÕÅ¶ÔÓ¦µãµÄÖÐµãÖµ×÷ÎªãÐÖµ
  32   1        extern unsigned long xdata FDC2214CalibrateValue[];//ÓÃÓÚ·ÅÐ£×¼µÄÖµ
  33   1        extern unsigned char xdata cThePointOfCalibrate[];//Ð£×¼µã±êÖ¾Î»  
  34   1        extern bit bFlagReflashFDC2214;//ÓÃÓÚµÚ1ÆÁ¸÷Í¨µÀÖµÏÔÊ¾Ë¢ÐÂÔÊÐí
  35   1        unsigned char xdata cKeyPressNumber=6;//´æ´¢5Ïò°´¼üÖµ
  36   1      
  37   1        unsigned long xdata FDC2214CH[4]={0,0,0,0}; //´æ·Å¶ÁÈ¡µÄFDC2214Öµ£¬4Í¨µÀ
  38   1        unsigned char xdata i=0,cCalibrateNum=1;//Ð£×¼¹¦ÄÜÖÐÏÔÊ¾µÄÕÅÊý
  39   1        unsigned int xdata intTemp=0,cMeasureNum=255; //²âÁ¿¹¦ÄÜÖÐÏÔÊ¾µÄÕÅÊý
  40   1        bit bFunctionIndex=0;//¹¦ÄÜÖ¸Ê¾±êÖ¾£¬0ÎªÐ£×¼£¬1Îª²âÊÔ
  41   1        bit bIndicatorIcon=0; //¹¦ÄÜÍ¼±êÑùÊ½£¬0Îª¿ÕÐÄÔ²£¬1ÎªÊµÐÄÔ²£¬¾ÍÊÇºº×Ö±íË÷Òý18+bIndicatorIcon
  42   1        bit bShowPaperNum=0;//ÏÔÊ¾²âÊÔÖ½ÕÅÊýÁ¿±êÖ¾
  43   1        bit bReCalibrate=0;//ÔÚÐ£×¼Ñ¡ÏîÖÐ°´ÏÂ¹ýÖÐ¼ä¼üÈ·ÈÏ£¬ËµÃ÷Ð£×¼Êý¾ÝÓÐ¸Ä±ä£¬´ËÎ»Îª1
  44   1        bit bCalibrateValueNoSaved=0;//ÓÃÓÚµ±Ç°Ð£×¼Êý¾Ý±£´æ±êÖ¾
  45   1        bit bSelectSaveItOrNot=0;//Àë¿ªÐ£×¼Ñ¡ÏîÊ±£¬ÏÔÊ¾È·ÈÏÊÇ·ñÒª±£´æÊý¾Ý½çÃæ
  46   1        bit bSaveCalibrateData=0;//±£´æÐ£×¼Êý¾Ý
  47   1        bit bCalibrateDataReset=0;//Ð£×¼Êý¾Ý»Ö¸´³ö³§ÉèÖÃ±êÖ¾
  48   1      
  49   1      //Beep=1;
  50   1      //while(1); 
  51   1        bFlag2ms=0;
  52   1      
  53   1        P1M1=P1M1& 0xFB; //ÉèÖÃP1.2ÎªÍÆÍìÊ½Êä³ö
  54   1        P1M0=P1M1| 0x04;  
C51 COMPILER V9.55   MAIN                                                                  10/28/2019 16:13:08 PAGE 2   

  55   1          
  56   1      
  57   1      
  58   1        SerialInit();//´®¿Ú1¡¢2³õÊ¼»¯
  59   1        S2SendString("AF:28");//µ÷ÉùÒôÄ£¿éÒôÁ¿  
  60   1        Timer0Init();//¶¨Ê±Æ÷0³õÊ¼»¯
  61   1        ADCInit();
  62   1      
  63   1        FDC2214Init();
  64   1        OLED_Init();      //³õÊ¼»¯OLED  
  65   1        OLED_Clear() ;  
  66   1        EEPROMInit()  ;//EEPROM³õÊ¼»¯
  67   1      
  68   1        
  69   1      
  70   1      
  71   1      //**********¼ì²âÓÐÃ»ÓÐÁ¬½ÓºÃFDC2214***************
  72   1        intTemp=FDC2214Read2Bytes(MANUFACTURER_ID);
  73   1        if(intTemp!=0x5449)
  74   1          S2SendString("A7:00019");//ÇëÁ¬½ÓºÃ´«¸ÐÆ÷ 
  75   1        while(intTemp!=0x5449)
  76   1        {
  77   2            OLED_ShowString(0,0,"Have no FDC2214!",16);
  78   2            OLED_ShowString(0,2,"Please connect",16);   
  79   2            OLED_ShowString(0,4,"it correctly!",16);      
  80   2            intTemp=FDC2214Read2Bytes(MANUFACTURER_ID);
  81   2        }
  82   1        
  83   1      //************************************************
  84   1        OLED_Clear() ;  
  85   1        S2SendString("A7:00014");//ÇëÐ£×¼Ö½ÕÅ
  86   1        
  87   1        OLED_PaperNumTitle(); 
  88   1      //  DelayNms(1000); 
  89   1      
  90   1        while(1)
  91   1        {   
  92   2      
  93   2            if(bFlagAD==1)//¼ì²â°´¼ü//ÅÐ¶ÏÊÇ·ñÓÐ°´¼ü°´ÏÂ
  94   2            {
  95   3              bFlagAD=0;
  96   3              cKeyPressNumber=JudgeKeyNum(cADCResult);//¶ÁÈ¡°´¼üÖµ
  97   3      //        S1SendData(cADCResult);              //°´¼üÖµ·¢ËÍµ½´®¿Ú         
  98   3            } 
  99   2      
 100   2            if(cKeyPressNumber<0x06)//ÓÐ¼ü°´ÏÂ£¬ÅÐ¶ÏÎªÄÄ¸ö¼ü°´ÏÂ£¬¸ù¾ÝÂß¼­¹¦ÄÜ±êÊ¶±êÖ¾Î»
 101   2            {
 102   3      //        S1SendData(cKeyPressNumber);              //°´¼üÖµ·¢ËÍµ½´®¿Ú  
 103   3              
 104   3              switch(cKeyPressNumber) //¸ù¾Ý°´¼üÖ´ÐÐ 
 105   3              { 
 106   4                case 0:// KeyStartStop    
 107   4                {
 108   5                  //°´¼ü³¬¹ý3Ãë£¬»Ö¸´Ô­Ê¼Ð£×¼Êý¾Ý
 109   5                  //Òª¼Ó3ÃëÅÐ¶Ï
 110   5                  if(bFlag3s==0)bFlag3s=1;
 111   5                  if(bFlag3s==1 && T0Counter3s>3000)
 112   5                  {
 113   6                    bCalibrateDataReset=1;//»Ö¸´Ô­Ê¼Ð£×¼Êý¾Ý±êÖ¾
 114   6                    bFlag3s=0;
 115   6                    T0Counter3s=0;
 116   6                  }
C51 COMPILER V9.55   MAIN                                                                  10/28/2019 16:13:08 PAGE 3   

 117   5                  //S1SendData(0x00);
 118   5                  break;//´®¿Ú·¢ËÍ  ;       
 119   5                }
 120   4                case 1://KeyDown
 121   4                {
 122   5                  if(bFunctionIndex==0)//ÔÚÐ£×¼¹¦ÄÜÖÐ£¬°´ÏòÏÂ¼ü
 123   5                  {
 124   6                    if(bReCalibrate==1)//Èç¹ûÐ£×¼¹ýÊý¾Ý£¬ËµÃ÷Ð£×¼½áÊø£¬Ìø³ö¶Ô»°¿ò£¬ÒªÇóÈ·ÈÏÊÇ·ñ±£´æÐ£×¼Êý¾Ý£¬
 125   6                    {
 126   7                    
 127   7                      bSelectSaveItOrNot=1;//ÊÇ·ñÏÔÊ¾±£´æÑ¡Ôñ¿ò±êÖ¾
 128   7                  //    cCalibrateNum=1;//Ð£×¼¹¦ÄÜÖÐÊý×Ö¹é1
 129   7                    
 130   7                    }
 131   6                    else//Èç¹ûÃ»ÓÐÐ£×¼¹ýÊý¾Ý£¬¾ÍÖ±½ÓÓÃÒÔÇ°µÄÐ£×¼Êý¾Ý²âÁ¿
 132   6                    {
 133   7                    
 134   7                      bFunctionIndex=1;//¹â±êÒÆµ½²âÁ¿Ñ¡Ïî
 135   7                    }
 136   6                  }
 137   5                //  S1SendData(0x01);//´®¿Ú·¢ËÍ ; 
 138   5                  break;
 139   5                }
 140   4                case 2:// KeyMiddle 
 141   4                {
 142   5                  if(BeepOnOff)
 143   5                  {
 144   6                    Beep=0; 
 145   6                    DelayNms(50);
 146   6                    Beep=1; 
 147   6                  }
 148   5                  if(bFunctionIndex==0)//ÔÚÐ£×¼¹¦ÄÜÖÐ
 149   5                  {
 150   6                    bReCalibrate=1;//±êÊ¶ÓÐÊý¾Ý±»Ð£×¼¹ý
 151   6                    bCalibrateValueNoSaved=1;//±êÊ¶µ±Ç°Êý¾ÝÎ´±»±£´æ
 152   6                    S2SendString("A7:00020"); //ÒÑÈ·ÈÏ2
 153   6      
 154   6                  }
 155   5                  else////²Ëµ¥Ñ¡ÔñÎª¼ÆÊý²Ù×÷
 156   5                  {
 157   6                    bShowPaperNum=1;
 158   6                  }
 159   5                  
 160   5                  bIndicatorIcon=1;//¹¦ÄÜÍ¼±êÑùÊ½¸ÄÎªÊµÐÄÔ²¡£Èç¹ûÔÚÐ£×¼ÖÐ£¬±íÊ¾µ±Ç°Êý¾ÝÒÑÐ£×¼£»Èç¹ûÔÚ²âÁ¿ÖÐ£¬±íÊ¾ÒÑÈ·È
             -ÏÏÔÊ¾ÕÅÊý
 161   5                  //S1SendData(0x02);//´®¿Ú·¢ËÍ ; 
 162   5                  break;
 163   5                }
 164   4                case 3:// KeyRight
 165   4                {
 166   5                  if(bFunctionIndex==0 & (cCalibrateNum<=170))//²Ëµ¥Ñ¡ÔñÎªÐ£×¼²Ù×÷
 167   5                  {
 168   6                    cCalibrateNum++;
 169   6                  }
 170   5        //          S1SendData(0x03);//´®¿Ú·¢ËÍ ; 
 171   5                  bIndicatorIcon=0;//ÏÔÊ¾¿ÕÐÄÔ²£¬±íÊ¾µ±Ç°Êý¾ÝµãÎ´¼ÇÂ¼Ð£×¼Öµ         
 172   5                  break;
 173   5      
 174   5                }
 175   4                case 4:// KeyLeft
 176   4                {
 177   5                  if(bFunctionIndex==0 & cCalibrateNum>1)//²Ëµ¥Ñ¡ÔñÎªÐ£×¼²Ù×÷
C51 COMPILER V9.55   MAIN                                                                  10/28/2019 16:13:08 PAGE 4   

 178   5                  {
 179   6                    cCalibrateNum--;
 180   6                  }
 181   5        //          S1SendData(0x04);
 182   5                  bIndicatorIcon=0;//ÏÔÊ¾¿ÕÐÄÔ²£¬±íÊ¾µ±Ç°Êý¾ÝµãÎ´¼ÇÂ¼Ð£×¼Öµ
 183   5                  break;//´®¿Ú·¢ËÍ  ;  
 184   5                  
 185   5                }
 186   4                case 5:// KeyUp
 187   4                {
 188   5                  //S1SendData(0x05);//´®¿Ú·¢ËÍ ; 
 189   5                  if(bFunctionIndex==1) //µ±Ç°ÔÚ²âÁ¿¹¦ÄÜ
 190   5                  {
 191   6                    S2SendString("A7:00017"); 
 192   6                    bFunctionIndex=0;
 193   6                    bShowPaperNum=0;
 194   6                  //  cCalibrateNum=1;//Ð£×¼¹¦ÄÜÖÐÊý×Ö¹é1
 195   6                    bIndicatorIcon=0;//ÏÔÊ¾¿ÕÐÄÔ²£¬±íÊ¾µ±Ç°Êý¾ÝµãÎ´¼ÇÂ¼Ð£×¼Öµ             
 196   6                  }
 197   5                  else;//ÔÚÐ£×¼¹¦ÄÜÖÐ
 198   5                  break;
 199   5                }
 200   4                default:
 201   4                break;//
 202   4              } 
 203   3              cKeyPressNumber=0x06;//¶Á¼üÖµ½áÊøºó¼´Ä¬ÈÏ°´¼üÌ§Æð
 204   3            }
 205   2      
 206   2      
 207   2            
 208   2            //¸ù¾Ý°´¼ü´¦Àí£¬ÏÔÊ¾
 209   2            if(bFlagReflashFDC2214)//Ã»ÓÐ°´¼ü°´ÏÂÊ±£¬Ë¢ÐÂÏÔÊ¾£»ÓÐ¼ü°´ÏÂÊ±£¬OLED²»Ë¢ÐÂ¡£ÕâÑù´¦ÀíÊÇÓÉÓÚOLEDË¢ÐÂºÍ¶ÁÈ¡
             -FDC2214Õ¼ÓÃCPUÊ±¼ä£¬°´¼üÏìÓ¦²»Á÷³©
 210   2            {
 211   3              
 212   3              if(bCalibrateDataReset==1)//»Ö¸´Ô­Ê¼Ð£×¼Êý¾Ý±êÖ¾
 213   3              {
 214   4                bCalibrateDataReset=0;
 215   4                bIndicatorIcon=0;
 216   4                S2SendString("A7:00018"); //»Ö¸´³ö³§Êý¾Ý 
 217   4                EEPROMReset();
 218   4              }
 219   3              if(bSelectSaveItOrNot==1)//ÏÔÊ¾±£´æÊý¾ÝÑ¡Ôñ½çÃæ£¬ÔÚÐ£×¼Ñ¡ÏîÖÐÀë¿ª£¬ÐèÒª±£´æÐ£×¼Êý¾Ý
 220   3              {
 221   4                S2SendString("A7:00015");     
 222   4                OLED_ShowString(0,2,"                ",16);//²Á³ý2,3,4ÐÐÏÔÊ¾
 223   4                OLED_ShowString(0,4,"                ",16);//     
 224   4                OLED_ShowString(0,6,"                ",16);//   
 225   4      
 226   4                //µ÷ÓÃ±£´æÐ£×¼Êý¾ÝµÄ½çÃæ
 227   4                OLED_ShowCHinese(0,2,21); //ÊÇ      
 228   4                OLED_ShowCHinese(16,2,22);//·ñ
 229   4                OLED_ShowCHinese(32,2,23);//±£  
 230   4                OLED_ShowCHinese(48,2,24);//´æ  
 231   4                OLED_ShowCHinese(64,2,3); //Êý
 232   4                OLED_ShowCHinese(80,2,25);//¾Ý  
 233   4                OLED_ShowString(96,2,"?",16);//?
 234   4                OLED_ShowCHinese(16,6,21);//ÊÇ            
 235   4                OLED_ShowCHinese(64,6,27);//·ñ
 236   4      
 237   4      //            
 238   4      //          
C51 COMPILER V9.55   MAIN                                                                  10/28/2019 16:13:08 PAGE 5   

 239   4                while(cKeyPressNumber!=0x02)//µÈ´ýÈ·ÈÏ±£´æ»ò²»±£´æ
 240   4                {
 241   5                  if(bFlagAD==1)
 242   5                  {
 243   6                    bFlagAD=0;
 244   6                    cKeyPressNumber=JudgeKeyNum(cADCResult);//¶ÁÈ¡°´¼üÖµ
 245   6                //S1SendData(cKeyPressNumber);              //°´¼üÖµ·¢ËÍµ½´®¿Ú  
 246   6                  } 
 247   5      
 248   5                  if(cKeyPressNumber==4)//Ïò×ó¼ü
 249   5                  {
 250   6                      OLED_ShowCHinese(16,6,26);            
 251   6                      OLED_ShowCHinese(64,6,22);
 252   6                      bSaveCalibrateData=1;//±£´æ
 253   6                  }
 254   5                  else if(cKeyPressNumber==3)//ÏòÓÒ¼ü
 255   5                  {
 256   6                      OLED_ShowCHinese(16,6,21);            
 257   6                      OLED_ShowCHinese(64,6,27);
 258   6                      bSaveCalibrateData=0;//²»±£´æ
 259   6                  }             
 260   5                }           
 261   4      
 262   4                  
 263   4        
 264   4                if(bSaveCalibrateData==1)//Ñ¡Ôñ±£´æ
 265   4                {
 266   5      //            cCalibrateNum=1;//ÏÔÊ¾µÄÐ£×¼ÕÅÊý¹é0
 267   5                  EEPROMSave();     //  ½«Ð£×¼Êý¾Ý±£´æµ½EEPROMµÚÒ»Ò³Ãæ  
 268   5                  bFunctionIndex=1;//¹â±êÒÆµ½²âÁ¿Ñ¡Ïî
 269   5                  bReCalibrate=0; //ÇåÖØÐ£×¼±êÖ¾                
 270   5                }
 271   4                else
 272   4                {
 273   5                  bFunctionIndex=0;//¹â±êÁôÔÚÐ£×¼Ñ¡Ïî
 274   5                }
 275   4                
 276   4                bSelectSaveItOrNot=0;//²»ÔÙÏÔÊ¾±£´æ¶Ô»°¿ò         
 277   4                cKeyPressNumber=0x06;//¶Á¼üÖµ½áÊøºó¼´Ä¬ÈÏ°´¼üÌ§Æð         
 278   4              
 279   4                OLED_PaperNumTitle();//»Ö¸´ÏÔÊ¾Ö÷½çÃæ
 280   4                bIndicatorIcon=0;//ÏÔÊ¾¿ÕÈ¦   
 281   4                
 282   4              }
 283   3              else//ÏÔÊ¾Õý³£Ö÷½çÃæ  
 284   3              {
 285   4            
 286   4                FDC2214CH[FDC2214ChannelNum]=FCD2214ReadCH(FDC2214ChannelNum);
 287   4      ////            S1SendData(FDC2214CH[FDC2214ChannelNum]>>24);
 288   4      ////            S1SendData(FDC2214CH[FDC2214ChannelNum]>>16);           
 289   4      ////            S1SendData(FDC2214CH[FDC2214ChannelNum]>>8);  
 290   4      ////            S1SendData(FDC2214CH[FDC2214ChannelNum]); 
 291   4                if(FDC2214CH[FDC2214ChannelNum]>ShortCircuitValue)//FDC2214¶ÌÂ·
 292   4                {
 293   5                  if(BeepOnOff) Beep=0; 
 294   5                  S2SendString("A7:00013");   //¼«°å¶ÌÂ·          
 295   5                  OLED_Clear();
 296   5      
 297   5                  OLED_ShowCHinese(0,0,8);    //¶ÌÂ·ÌáÊ¾    
 298   5                  OLED_ShowCHinese(16,0,9); 
 299   5      
 300   5                  while(FDC2214CH[FDC2214ChannelNum]>ShortCircuitValue)
C51 COMPILER V9.55   MAIN                                                                  10/28/2019 16:13:08 PAGE 6   

 301   5                  {
 302   6                    
 303   6        //++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++            
 304   6                    
 305   6                    FDC2214CH[FDC2214ChannelNum]=FilteredFCD2214ReadCH(FDC2214ChannelNum);
 306   6                    //FDC2214CH[FDC2214ChannelNum]=FCD2214ReadCH(FDC2214ChannelNum);
 307   6                    DelayNms(1);
 308   6                    //S1SendData(0x01);
 309   6                  }//³ÌÐòÍ£ÔÚÕâÀïÖ±µ½¶ÌÂ·½â³ý
 310   5                  if(BeepOnOff) Beep=1;
 311   5                  //S1SendData(0x02);
 312   5                  OLED_PaperNumTitle();//ÖØÐÂÏÔÊ¾Ô­À´µÄ½çÃæ             
 313   5                }
 314   4                else//FDC2214¼«°å²»¶ÌÂ·
 315   4                {
 316   5                  OLED_ShowString(34,6,Hex2ASCII(FDC2214CH[FDC2214ChannelNum]),16); //×îºóÒ»ÐÐÏÔÊ¾µ±Ç°FDC2214½á¹û£¬×ª»
             -»³É8Î»Ê®Áù½øÖÆÏÔÊ¾
 317   5      
 318   5                  if(bFunctionIndex==0 )//ÔÚÐ£×¼¹¦ÄÜÖÐ£¬
 319   5                  {
 320   6                    
 321   6                    if(bCalibrateValueNoSaved==1)//ÇÒÓÐÊý¾Ý±»Ð£×¼
 322   6                     {
 323   7                        //S2SendString("A7:00017"); 
 324   7                        //+++++++++¶ÁÈ¡FDC2214Öµ£¬ÒÔ[cCalibrateNum-1]ÎªÏÂ±ê£¬´æÈëÊý×é+++++++++++++      
 325   7                        cThePointOfCalibrate[cCalibrateNum-1]=1;//¸Ä±ä±êÖ¾Î» 
 326   7                        FDC2214CalibrateValue[cCalibrateNum-1]=FilteredFCD2214ReadCH(FDC2214ChannelNum);//±£´æ¶ÁÈë¾­¹ýÂË²
             -¨µÄÐ£×¼Öµ                
 327   7                        bCalibrateValueNoSaved=0;//µ±Ç°Êý¾ÝÒÑ±»±£´æ                    
 328   7                     }    
 329   6                 
 330   6                     OLED_ShowString(48,2,Hex2ASCII3Figure(cCalibrateNum),16);  //ÏÔÊ¾Ð£×¼ÕÅÊý               
 331   6                     OLED_ShowCHinese(112,4,20);  //¸ù¾Ýµ±Ç°¹¦ÄÜ±êÖ¾£¬²Á³ýÔ­À´Ô²È¦¹â±ê  
 332   6                     OLED_ShowCHinese(112,2,18+(bIndicatorIcon?1:0)); //¸ù¾ÝbIndicatorIconÖµ£¬Îª1ÏÔÊ¾ÊµÔ²È¦£¬Îª0ÏÔÊ¾¿ÕÔ
             -²È¦
 333   6                     OLED_ShowString(48,4,"   ",16);//²Á³ý²âÁ¿¹¦ÄÜÉÏÏÔÊ¾µÄÕÅÊý
 334   6                     
 335   6                 
 336   6                     
 337   6                  }
 338   5                  else//ÔÚ²âÁ¿¹¦ÄÜÖÐ£¬
 339   5                  {
 340   6                    
 341   6                    if(bShowPaperNum==1)//ÏÔÊ¾²âÁ¿ÕÅÊý
 342   6                    {
 343   7                      //++++++++++++++++
 344   7                      //+++++++++++++++++
 345   7                      //¸ù¾ÝFDC2214CH[1]ÅÐ¶ÏÕÅÊý£¬
 346   7                      
 347   7                          
 348   7                      cMeasureNum=JudgePaperNum(FilteredFCD2214ReadCH(FDC2214ChannelNum));
 349   7                      S2SendString(Num2Speaker(cMeasureNum));//ÓïÒô±¨ÕÅÊý
 350   7                      
 351   7                      bIndicatorIcon=1;             
 352   7                      P55=0;
 353   7                      OLED_ShowString(48,4,"   ",16);//²Á³ýÏÔÊ¾µÄÕÅÊý
 354   7                      OLED_ShowCHinese(112,4,18+(bIndicatorIcon?1:0));  //¸ù¾ÝbIndicatorIconÖµ£¬Îª1ÏÔÊ¾ÊµÔ²È¦£¬Îª0ÏÔÊ¾¿Õ
             -Ô²È¦                  
 355   7                      DelayNms(500);
 356   7                      //+++++++++++++++ÏÔÊ¾¼ÆÊýÕÅÊý£¬µ÷ÓÃÉùÒôÌáÊ¾++++++++++++++++++
 357   7                      
 358   7                      OLED_ShowString(48,4,Hex2ASCII3Figure(cMeasureNum),16);   //ÏÔÊ¾²âÁ¿ÕÅÊý  
C51 COMPILER V9.55   MAIN                                                                  10/28/2019 16:13:08 PAGE 7   

 359   7                      P55=1;
 360   7                      bIndicatorIcon=0;
 361   7                      bShowPaperNum=0;
 362   7                    }
 363   6                    OLED_PaperNumTitle();//ÖØÐÂÏÔÊ¾Ô­À´µÄ½çÃæ                 
 364   6                    OLED_ShowCHinese(112,2,20); //¸ù¾Ýµ±Ç°¹¦ÄÜ±êÖ¾£¬²Á³ýÔ­À´Ô²È¦¹â±ê  
 365   6                    OLED_ShowCHinese(112,4,18+(bIndicatorIcon?1:0));  //¸ù¾ÝbIndicatorIconÖµ£¬Îª1ÏÔÊ¾ÊµÔ²È¦£¬Îª0ÏÔÊ¾¿ÕÔ²
             -È¦                                  
 366   6                    OLED_ShowString(48,2,"   ",16);//²Á³ýÐ£×¼¹¦ÄÜÉÏÏÔÊ¾µÄÕÅÊý           
 367   6      
 368   6                  }
 369   5                }
 370   4      
 371   4              }
 372   3            }
 373   2        }
 374   1      }
 375          
 376          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1178    ----
   CONSTANT SIZE    =    154    ----
   XDATA SIZE       =   ----      23
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----       8
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
